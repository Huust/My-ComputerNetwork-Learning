# 什么是计算机网络

## 基础概念

- 主机之前可以通过通信链路进行交流
- 如果主机之间距离较远，则应该通过**交换网络**互连
- **交换节点**是交换网络中的概念，常见的有路由器，交换机

## 硬件设备

计算设备--通信链路--分组交换

计算设备：主机hosts，运行各种网络设备

通信链路：光纤，电缆

分组交换：routers，switches

## 网络协议

> *试问，仅靠硬件设备，能否保证各主机之间数据交付的正常运行吗*

> 肯定不能。数据交互必须要有**协议**才能确保收发的准确快捷安全。

就好比大马路上有车有路，但若没有交通规则，就无法保证交通有序

- 网络协议三要素

<img src="/Users/leisurie/Library/Application Support/typora-user-images/截屏2020-11-11 下午8.42.32.png" alt="截屏2020-11-11 下午8.42.32" style="zoom:50%;" />

## 计算机网络结构


<img src="/Users/leisurie/Library/Application Support/typora-user-images/截屏2020-11-11 下午8.46.39.png" alt="截屏2020-11-11 下午8.46.39" style="zoom:50%;" />

- 网络边缘---运行应用程序

- Client-server应用模型：**服务器处于网络边缘；不要认为服务器位于多个主机的中心，他也是边缘设备，所以数据收发都是通过核心网络传递到客户端**

- P2P模型：例如qq收发消息直接跳过服务器，主机之间直接交互



## 计算机网络的体系结构

网络各层遵循相应的协议，完成相应的功能，最终实现整个体系结构的功能

- 分层结构的基本概念

![截屏2020-11-11 下午9.20.48](/Users/leisurie/Library/Application Support/typora-user-images/截屏2020-11-11 下午9.20.48.png)*可以认为使用下层服务类似于OS中的系统调用，上层无需关心下层如何实现*

> 交换原语：简单理解为上下两层之间一些指令，信号的交换，数据交换



## OSI参考模型

- 1.七层网络模型
  <img src="/Users/leisurie/Library/Application Support/typora-user-images/截屏2020-11-12 下午3.51.10.png" alt="截屏2020-11-12 下午3.51.10" style="zoom:50%;" />

- 2.两台主机通过OSI模型实现通信的流程

  主机A将数据从7-1层，逐层打包数据；最后在物理层结束时通过**传输介质**传送到中间系统；中间系统利用相应层之间的协议解析数据，之后再打包，通过传输介质送到主机B；最终主机B遵循相应每一层的协议解析接收到的数据。<img src="/Users/leisurie/Library/Application Support/typora-user-images/截屏2020-11-12 下午3.59.20.png" alt="截屏2020-11-12 下午3.59.20" style="zoom:50%;" />

  

  **最高四层在两台主机之间可以认为是直接按照协议打包，按照协议解析的，就好像没有通过中间系统而是直接两主机交互数据**

  > 所以最高四层又称为end-end layer端到端层



- 3.数据是如何打包与解析的

<img src="/Users/leisurie/Library/Application Support/typora-user-images/截屏2020-11-12 下午4.09.55.png" alt="截屏2020-11-12 下午4.09.55" style="zoom:50%;" />

​		如图，每一层都会为上一层数据增加HEAD；最终到达物理层，传输比特流

​		整个流程，打包和解析，遵循各层协议

- 4.为什么在每一层都需要打包数据

  因为需要为数据加上一些标识符，比如发送者和接收者（ip address）；又比如校验码等等

  

## OSI模型——物理层，数据链路层，网络层

- 1.物理层和数据链路层

物理层+数据链路层其实就是MCU之间串口通信的需要的两层

所以像是蓝牙，Wi-Fi都可以看成链路层传输

物理层负责比特流传输

数据链路层对数据加帧头帧尾，比如0x0d 0x0a这些

*如果是一对多的广播模型，那么还要在帧中添加收发物理地址（如图）*

![截屏2020-11-12 下午4.26.18](/Users/leisurie/Library/Application Support/typora-user-images/截屏2020-11-12 下午4.26.18.png)

- 2.网络层

如果处在局域网中，可能不需要网络层；但是若是处在不同网络的主机想要交流，就必须通过网络层传输**逻辑地址**告知确保收发方的正常通信，比如ip地址



## OSI模型——端到端层

- 1.传输层

  **两台主机之间的进程端口号建立与确认**就涉及到传输层

- 2.会话层

  进程通信的对话建立维护；确保进程数据传输的同步

- 3.表示层

  对数据的转换

  > 举例：两个进程使用不同的字符编码；那么在传输是可以统一先转换成utf8，等数据传到接受端之后再解析成需要的编码，比如ansi

- 4.应用层

  

## 5层模型

将表示层和会话层合并到应用层，构成5层模型。

<img src="/Users/leisurie/Library/Application Support/typora-user-images/截屏2020-11-12 下午4.59.45.png" alt="截屏2020-11-12 下午4.59.45" style="zoom:50%;" />

> 两个主机之间通过路由器传输时会利用路由器网络层实现ip地址的对接。
